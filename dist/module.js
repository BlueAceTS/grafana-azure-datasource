define(["react","@grafana/ui","lodash","@grafana/data","@grafana/runtime"],(function(e,t,n,r,a){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=5)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t,n){"use strict";n.r(t);var r=n(3),a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function o(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function s(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n((function(t){t(e.value)})).then(i,s)}u((r=r.apply(e,t||[])).next())}))}function u(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var l=n(2),c=function(e){this.id="",this.subscriptionId="",this.tenantId="",this.displayName="",this.name="",e&&(this.id=e.id||e.subscriptionId,this.subscriptionId=e.subscriptionId||e.id,this.tenantId=e.tenantId,this.displayName=e.displayName,this.name=e.name||e.displayName||"")},p=n(4),m=function e(t,n){return void 0===n&&(n=1),Object(p.getBackendSrv)().datasourceRequest(t).catch((function(r){return n>0?e(t,n-1):(console.error("Error while retreiving data from "+t.url,r),{})}))},f=function(){function e(e){this.instanceSettings=e,this.subscriptions=[],this.baseUrl=e.url,this.cloudName=e.jsonData.cloudName||"azuremonitor"}return e.$inject=["instanceSettings"],e.prototype.getSubscriptions=function(){return s(this,void 0,void 0,(function(){var e,t=this;return u(this,(function(n){return this.subscriptions.length>0?[2,new Promise((function(e){e(t.subscriptions)}))]:(e={method:"GET",url:this.baseUrl+"/"+this.cloudName+"/subscriptions?api-version=2018-01-01"},[2,m(e,2).then((function(e){return e&&200===e.status&&e.data&&e.data.value?(t.subscriptions=(e.data.value||[]).map((function(e){return new c(e)})),t.subscriptions):(console.error("Invalid response received for getSubscriptions query",e),t.subscriptions)})).catch((function(e){return console.error(e),t.subscriptions}))])}))}))},e}(),h=function(e,t){this.refId=e,this.query=t},d=function(e,t){return e=(e||[]).map((function(e,t){return e.text=e.name||t,e.type="integer"===e.type?"number":e.type||"string",e})),t=(t||[]).map((function(t){return t.map((function(t,n){return e[n]&&"number"===e[n].type?+t:"string"==typeof t?t:JSON.stringify(t)}))})),{columns:e,rows:t,type:"table"}},g=function(e){var t=[];return e&&e.rows&&e.rows.forEach((function(e){if(2===e.length){var n=e[0],r=e[1];t.push({text:n,value:r})}else e.forEach((function(e){var n=e,r=e;t.push({text:n,value:r})}))})),t},y=function(e){var t=e[0]||{};return t.rows=Object(l.uniq)(Object(l.flatten)(e.map((function(e){return e.rows})))),t},v=function(e){var t,n,r=this;this.output={columns:[],refId:"",rows:[],type:"table"},n=[],e.forEach((function(e){e.result&&e.result.data&&e.result.data.tables?(e.result.data.tables||[]).forEach((function(e){e.columns&&3===e.columns.length&&e.columns.find((function(e){return"datetime"===e.type}))&&e.columns.find((function(e){return"string"===e.type}))&&e.columns.find((function(e){return"long"===e.type}))?n.push("time_series"):e.columns&&2===e.columns.length&&e.columns.find((function(e){return"datetime"===e.type}))&&e.columns.find((function(e){return"long"===e.type}))?n.push("time_series"):n.push("table")})):e.result&&e.result.data&&e.result.data.data&&n.push("table")})),Object(l.every)(n,(function(e){return"time_series"===e}))?(this.output.type="time_series",this.output=(t=[],e.forEach((function(e){e.result&&e.result.data&&e.result.data.tables&&(e.result.data.tables||[]).forEach((function(e){var n=function(e){var t={};return e.columns.forEach((function(e,n){"datetime"===e.type?(t.timestamp={},t.timestamp.name=e.name,t.timestamp.index=n):"string"===e.type?(t.metricname={},t.metricname.name=e.name,t.metricname.index=n):"long"===e.type&&(t.value={},t.value.name=e.name,t.value.index=n)})),function(e){return!(e.columns&&e.columns.length>=3&&e.columns.find((function(e){return"datetime"===e.type}))&&e.columns.find((function(e){return"string"===e.type}))&&e.columns.find((function(e){return"long"===e.type}))||(e.columns&&e.columns.length>=2&&e.columns.find((function(e){return"datetime"===e.type}))&&e.columns.find((function(e){return"long"===e.type})),0))}(e)&&(t.metricname={},t.metricname.name=t.value.name||"metric",t.metricname.index=-1),t}(e);if(-1===n.metricname.index){var r={};r.target=n.value.name,r.datapoints=[],e.rows.forEach((function(e){r.datapoints.push([e[n.value.index],new Date(e[n.timestamp.index]).getTime()])})),t.push(r)}else Object(l.uniq)(e.rows.map((function(e){return e[n.metricname.index]}))).forEach((function(r){var a={};a.target=r,a.datapoints=[],e.rows.forEach((function(e){e[n.metricname.index]===r&&a.datapoints.push([e[n.value.index],new Date(e[n.timestamp.index]).getTime()])})),t.push(a)}))}))})),t),this.output=this.output.map((function(e){return e.datapoints=Object(l.sortBy)(e.datapoints,[function(e){return e[1]}]),e}))):(this.output.type="table",e.forEach((function(e){if(e.result&&e.result.data&&e.result.data.tables)(t=e.result.data.tables||[]).forEach((function(t){var n=d(t.columns,t.rows);r.output.columns=n.columns,r.output.rows=[].concat(r.output.rows,n.rows),r.output.refId=e.query.refId}));else if(e.result&&e.result.data&&e.result.data.data){var t=e.result.data.data||{},n=d(t.columns,t.rows);r.output.columns=n.columns,r.output.rows=[].concat(r.output.rows,n.rows),r.output.refId=e.query.refId}})))},C=n(0),b=n.n(C),A=n(1),N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onResourceGraphQueryChange=function(e){var n=e.target.value,r=t.props,a=r.query,o=r.onChange,s=a.azureResourceGraph;s.query=n,o(i(i({},a),{azureResourceGraph:s}))},t.onResourceGraphTopChange=function(e){var n=e.target.value,r=t.props,a=r.query,o=r.onChange,s=a.azureResourceGraph;s.top=n,o(i(i({},a),{azureResourceGraph:s}))},t.onResourceGraphSkipChange=function(e){var n=e.target.value,r=t.props,a=r.query,o=r.onChange,s=a.azureResourceGraph;s.skip=n,o(i(i({},a),{azureResourceGraph:s}))},t}return o(t,e),t.prototype.render=function(){var e=this.props.query;return b.a.createElement("div",null,b.a.createElement("div",null,b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.FormLabel,{className:"width-12",tooltip:"Resource Graph Query"},"Query"),b.a.createElement("textarea",{value:e.azureResourceGraph.query||"",onChange:this.onResourceGraphQueryChange,className:"gf-form-input min-width-30 width-30",rows:10})))),b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.FormField,{label:"Top",labelWidth:12,inputWidth:9,onChange:this.onResourceGraphTopChange,value:e.azureResourceGraph.top,placeholder:"1000",tooltip:"Top N Results. Default / Max is 1000"}),b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"width-1"})),b.a.createElement(A.FormField,{label:"Skip",labelWidth:12,inputWidth:9,onChange:this.onResourceGraphSkipChange,value:e.azureResourceGraph.skip,placeholder:"0",tooltip:"Skip N Results. Default 0"}))))))},t}(C.PureComponent),w={query:"",top:1e3,skip:0},E=function(e){function t(t,n,r,a,o){void 0===t&&(t=""),void 0===n&&(n=""),void 0===r&&(r=1e3),void 0===a&&(a=0),void 0===o&&(o=[]);var i=e.call(this,t,n)||this;return i.top=r,i.skip=a,i.subscriptions=o,i}return o(t,e),t}(h),S=function(){function e(e,t){this.azureConnection=e,this.templateSrv=t,this.allSubscriptions=[],this.url=e.instanceSettings.url,this.baseUrl="/"+e.instanceSettings.jsonData.cloudName}return e.$inject=["azureConnection","templateSrv"],e.prototype.doResourceGraphRequest=function(e,t){return void 0===t&&(t=1),s(this,void 0,void 0,(function(){var n,r,a,o;return u(this,(function(i){switch(i.label){case 0:return n=[],0!==this.allSubscriptions.length?[3,2]:(r=this,[4,this.azureConnection.getSubscriptions()]);case 1:r.allSubscriptions=i.sent(),i.label=2;case 2:return n=this.allSubscriptions.map((function(e){return e.subscriptionId.toString()})),e.subscriptions.indexOf("all")<0&&(a=e.subscriptions.filter((function(e){return"all"!==e}))).length>0&&(n=a),o={data:{options:{$skip:e.skip||0,$top:e.top||100,resultFormat:"table"},query:e.query,subscriptions:n},headers:{"Content-Type":"application/json"},method:"POST",url:this.url+this.baseUrl+"/providers/Microsoft.ResourceGraph/resources?api-version=2019-04-01"},[2,m(o,t)]}}))}))},e.prototype.doQueries=function(e){var t=this;return e.map((function(e){return t.doResourceGraphRequest(e).then((function(t){return{result:t,query:e}})).catch((function(t){throw{error:t,query:e}}))}))},e.prototype.query=function(e){return s(this,void 0,void 0,(function(){var t,n,r=this;return u(this,(function(a){return(t=e.targets.filter((function(e){return!0!==e.hide&&e.azureResourceGraph&&e.azureResourceGraph.query})).map((function(t){var n=t.azureResourceGraph;return new E(t.refId,r.templateSrv.replace(n.query,e.scopedVars),n.top||1e3,n.skip||0,n.subscriptions||["all"])})))&&0!==t.length?(n=this.doQueries(t),[2,Promise.all(n).then((function(e){return new v(e).output}))]):[2]}))}))},e.prototype.simpleQuery=function(e,t,n,r,a){if(void 0===t&&(t="SimpleQuery"),void 0===n&&(n=1e3),void 0===r&&(r=0),void 0===a&&(a=["all"]),e){var o=[new E(t,e,n,r,a)],i=this.doQueries(o);return Promise.all(i).then((function(e){return new v(e).output}))}},e.prototype.batchQuery=function(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r=0),s(this,void 0,void 0,(function(){var a;return u(this,(function(o){switch(o.label){case 0:return[4,this.simpleQuery(e,"",1e3,r)];case 1:return a=o.sent(),n.push(a),t>0&&a&&a.rows&&a.rows.length>=1e3?[4,this.batchQuery(e,t-1,n,r+1e3)]:[3,3];case 2:o.sent(),o.label=3;case 3:return[2,y(n)]}}))}))},e.prototype.metricFindQuery=function(e,t){if(void 0===t&&(t="MetricFindQuery"),e.startsWith("ResourceGraph(")&&e.endsWith(")")){var n=e.replace("ResourceGraph(","").slice(0,-1),r=new E(t,this.templateSrv.replace(n),1e3,0,["all"]),a=this.doQueries([r]);return Promise.all(a).then((function(e){var t=new v(e);return g(t.output)}))}if(e.startsWith("Subscriptions(")&&e.endsWith(")")){n='resourcecontainers | where type == "microsoft.resources/subscriptions" | distinct name, subscriptionId | order by name asc',r=new E(t,this.templateSrv.replace(n),1e3,0,["all"]),a=this.doQueries([r]);return Promise.all(a).then((function(e){var t=new v(e);return g(t.output)}))}if(e.startsWith("ResourceGroups(")&&e.endsWith(")")){var o=e.replace("ResourceGroups(","").slice(0,-1);n="";n=o?'resourcecontainers | where type != "microsoft.resources/subscriptions" and subscriptionId == "'+o+'" | distinct name | order by name asc':'resourcecontainers | where type != "microsoft.resources/subscriptions" | distinct name | order by name asc';r=new E(t,this.templateSrv.replace(n),1e3,0,["all"]),a=this.doQueries([r]);return Promise.all(a).then((function(e){var t=new v(e);return g(t.output)}))}},e}(),z=function(e,t,n,r,a){if(void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),void 0===r&&(r=""),void 0===a&&(a=""),this.id="",this.subscriptionId="",this.resourceGroup="",this.type="",this.name="",e){var o=e.split("/");this.id=e,this.subscriptionId=o[2],this.resourceGroup=o[4],this.type=o.filter((function(e,t){return e&&t>=6&&t!==o.length-1})).join("/"),this.name=o[o.length-1]}else n&&r&&a&&(this.id="/subscriptions/"+t+"/resourceGroups/"+n+"/providers/"+r+"/"+a)},X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAppInsightsAppIDChange=function(e){var n=e.target.value,r=t.props,a=r.query,o=r.onChange,s=a.azureAppInsights;s.appInsightsAppId=n,o(i(i({},a),{azureAppInsights:s}))},t.onAppInsightsQueryChange=function(e){var n=e.target.value,r=t.props,a=r.query,o=r.onChange,s=a.azureAppInsights;s.query=n,o(i(i({},a),{azureAppInsights:s}))},t}return o(t,e),t.prototype.render=function(){var e=this.props.query;return b.a.createElement("div",null,b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.FormField,{label:"Application Insights ID",labelWidth:12,inputWidth:24,onChange:this.onAppInsightsAppIDChange,value:e.azureAppInsights.appInsightsAppId||"",placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",tooltip:"AppInsights ID"})))),b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.FormLabel,{className:"width-12",tooltip:"Application Insights Query"},"Query"),b.a.createElement("textarea",{value:e.azureAppInsights.query||"",onChange:this.onAppInsightsQueryChange,className:"gf-form-input min-width-30 width-30",rows:10})))))},t}(C.PureComponent),I={appInsightsAppId:"",query:""},q=function(e){function t(t,n,r,a){void 0===t&&(t=""),void 0===n&&(n=""),void 0===r&&(r=""),void 0===a&&(a="");var o=e.call(this,t,a)||this;return o.resourceId=n,o.resource=new z(n),o.appInsightsAppId=r,o.query=a,o}return o(t,e),t}(h),F=function(){function e(e,t){this.azureConnection=e,this.templateSrv=t,this.url=this.azureConnection.instanceSettings.url,this.baseUrl="/"+this.azureConnection.instanceSettings.jsonData.cloudName}return e.$inject=["azureConnection","templateSrv"],e.prototype.doApplicationInsightsRequest=function(e,t){return void 0===t&&(t=1),s(this,void 0,void 0,(function(){var n;return u(this,(function(r){return n={data:{query:e.query},headers:{"Content-Type":"application/json"},method:"POST",url:this.url+this.baseUrl+e.resourceId+"/query?api-version=2018-04-20"},e.appInsightsAppId&&(n.url=this.url+"/applicationinsights/v1/apps/"+e.appInsightsAppId+"/query?api-version=2018-04-20"),[2,m(n,t)]}))}))},e.prototype.doQueries=function(e){var t=this;return e.map((function(e){return t.doApplicationInsightsRequest(e).then((function(t){return{result:t,query:e}})).catch((function(t){throw{error:t,query:e}}))}))},e.prototype.query=function(e){return s(this,void 0,void 0,(function(){var t,n,r=this;return u(this,(function(a){return(t=e.targets.filter((function(e){var t=e.azureAppInsights;return!0!==e.hide&&t&&t.query&&(t.resourceId||t.appInsightsAppId)})).map((function(t){var n=t.azureAppInsights;return new q(t.refId,r.templateSrv.replace(n.resourceId,e.scopedVars),r.templateSrv.replace(n.appInsightsAppId,e.scopedVars),r.templateSrv.replace(n.query,e.scopedVars))})))&&0!==t.length?(n=this.doQueries(t),[2,Promise.all(n).then((function(e){return new v(e).output}))]):[2]}))}))},e.prototype.metricFindQuery=function(e){},e}(),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onLAWorkspaceIDChange=function(e){var n=e.target.value,r=t.props,a=r.query,o=r.onChange,s=a.azureLogAnalytics;s.workspace=n,o(i(i({},a),{azureLogAnalytics:s}))},t.onLAQueryChange=function(e){var n=e.target.value,r=t.props,a=r.query,o=r.onChange,s=a.azureLogAnalytics;s.query=n,o(i(i({},a),{azureLogAnalytics:s}))},t}return o(t,e),t.prototype.render=function(){var e=this.props.query;return b.a.createElement("div",null,b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.FormField,{label:"Workspace ID",labelWidth:12,inputWidth:24,onChange:this.onLAWorkspaceIDChange,value:e.azureLogAnalytics.workspace||"",placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",tooltip:"Log Anlaytics workspace ID"})))),b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.FormLabel,{className:"width-12",tooltip:"Log Analytics Query"},"Query"),b.a.createElement("textarea",{value:e.azureLogAnalytics.query||"",onChange:this.onLAQueryChange,className:"gf-form-input min-width-30 width-30",rows:10})))))},t}(C.PureComponent),D={workspace:"",query:""},O=function(e){function t(t,n,r,a){void 0===t&&(t=""),void 0===n&&(n=""),void 0===r&&(r=""),void 0===a&&(a="");var o=e.call(this,t,a)||this;return o.resourceId=n,o.resource=new z(n),o.workspace=r,o.query=a,o}return o(t,e),t}(h),j=function(){function e(e,t){this.azureConnection=e,this.templateSrv=t,this.url=this.azureConnection.instanceSettings.url,this.baseUrl="/"+this.azureConnection.instanceSettings.jsonData.cloudName}return e.$inject=["azureConnection","templateSrv"],e.prototype.doLogAnalyticsRequest=function(e,t){return void 0===t&&(t=1),s(this,void 0,void 0,(function(){var n;return u(this,(function(r){return n={data:{query:e.query},headers:{"Content-Type":"application/json"},method:"POST",url:this.url+this.baseUrl+e.resourceId+"/query?api-version=2017-10-01"},e.workspace&&(n.url=this.url+"/loganalytics/v1/workspaces/"+e.workspace+"/query?api-version=2017-10-01"),[2,m(n,t)]}))}))},e.prototype.doQueries=function(e){var t=this;return e.map((function(e){return t.doLogAnalyticsRequest(e).then((function(t){return{result:t,query:e}})).catch((function(t){throw{error:t,query:e}}))}))},e.prototype.query=function(e){return s(this,void 0,void 0,(function(){var t,n,r=this;return u(this,(function(a){return(t=e.targets.filter((function(e){var t=e.azureLogAnalytics;return!0!==e.hide&&t&&t.query&&(t.resourceId||t.workspace)})).map((function(t){var n=t.azureLogAnalytics;return new O(t.refId,r.templateSrv.replace(n.resourceId,e.scopedVars),r.templateSrv.replace(n.workspace,e.scopedVars),r.templateSrv.replace(n.query,e.scopedVars))})))&&0!==t.length?(n=this.doQueries(t),[2,Promise.all(n).then((function(e){return new v(e).output}))]):[2]}))}))},e.prototype.metricFindQuery=function(e){},e}(),R=function(e,t,n){var r=2;if(this.timestamp=new Date,this.label="",this.cost=e[0],"None"===n.granularity)this.timestamp=new Date(n.query.range.from),r--;else if("Daily"===n.granularity){var a=e[2].toString(),o=a.substring(0,4),i=a.substring(4,6),s=a.substring(6,8);this.timestamp=new Date(o,i-1,s)}else"Monthly"===n.granularity&&(this.timestamp=new Date(e[2]));n.data.dataSet.grouping?n.data.dataSet.grouping[0]&&"TagKey"===n.data.dataSet.grouping[0].type?this.label=e.filter((function(t,n){return n<e.length-1&&n>r+1})).map((function(e){return e||"-"})).join(":").trim():this.label=e.filter((function(t,n){return n<e.length-1&&n>r})).map((function(e){return e||"-"})).join(":").trim():this.label="cost"},G=function(e){var t=this;this.output=[];var n=[];e.forEach((function(e){e&&e.result&&e.result.data&&e.result.data.properties&&e.result.data.properties.rows&&e.result.data.properties.rows.forEach((function(t){n.push(new R(t,e.result.data.properties.columns,e.query))}))})),Object(l.uniq)(n.map((function(e){return e.label}))).forEach((function(e){var r={target:e||"-",datapoints:[]};r.datapoints=n.filter((function(t){return t.label===e})).map((function(e){return[e.cost,e.timestamp]})).sort((function(e,t){return e[1]-t[1]})),t.output.push(r)})),this.output=this.output.sort((function(e,t){return t.target-e.target}))},x=[{value:"None",label:"None"},{value:"Daily",label:"Daily"},{value:"Monthly",label:"Monthly"}],P=[{value:"None",label:"None"},{value:"Dimension",label:"Dimension"},{value:"TagKey",label:"Tag"}],k=[{value:"ResourceId",label:"Resource"},{value:"ResourceType",label:"Resource Type"},{value:"ResourceLocation",label:"Resource Location"},{value:"ResourceGroupName",label:"Resource Group Name"},{value:"ServiceName",label:"Service Name"},{value:"ServiceTier",label:"Service Tier"},{value:"Meter",label:"Meter"},{value:"MeterCategory",label:"Meter Category"},{value:"MeterSubCategory",label:"Meter SubCategory"},{value:"PricingModel",label:"Pricing Model"},{value:"PublisherType",label:"Publisher Type"},{value:"ChargeType",label:"Charge Type"}],Q=[{value:"None",label:"None"},{value:"Dimensions",label:"Dimensions"},{value:"Tags",label:"Tags"}],L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=Object(l.defaults)(t.state,{AzureSubscriptions:[]}),t.onACASubscriptionIDChange=function(e){var n=e.value,r=t.props,a=r.query,o=r.onChange,s=a.azureCostAnalysis;s.subscriptionId=n,o(i(i({},a),{azureCostAnalysis:s}))},t}return o(t,e),t.prototype.componentWillMount=function(){var e=this;0===this.state.AzureSubscriptions.length&&new f(this.props.datasource.instanceSettings).getSubscriptions().then((function(t){e.setState({AzureSubscriptions:t.map((function(e){return{value:e.subscriptionId,label:e.name}}))})}))},t.prototype.render=function(){var e=this.props.query;return b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.FormLabel,{className:"width-12",tooltip:"Subscription"},"Subscription"),b.a.createElement(A.Select,{className:"width-24",value:this.state.AzureSubscriptions.find((function(t){return t.value===e.azureCostAnalysis.subscriptionId})),options:this.state.AzureSubscriptions,defaultValue:e.azureCostAnalysis.subscriptionId,onChange:this.onACASubscriptionIDChange}))))},t}(C.PureComponent),V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onACAGranularityChange=function(e){var n=t.props,r=n.query,a=n.onChange,o=r.azureCostAnalysis;o.granularity=e.value,a(i(i({},r),{azureCostAnalysis:o}))},t}return o(t,e),t.prototype.render=function(){var e=this.props.query;return b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.FormLabel,{className:"width-12",tooltip:"Granularity"}," ","Granularity"),b.a.createElement(A.Select,{className:"width-24",value:x.find((function(t){return t.value===e.azureCostAnalysis.granularity})),options:x,defaultValue:e.azureCostAnalysis.granularity,onChange:this.onACAGranularityChange}))))},t}(C.PureComponent),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onACAGroupingTypeChange=function(e){var n=e.value,r=t.props,a=r.query,o=r.onChange,s=a.azureCostAnalysis;s.grouping=s.grouping||{type:"Dimension",name:"ServiceName"},s.grouping[0].type=n,o(i(i({},a),{azureCostAnalysis:s}))},t.onACAGroupingNameChange=function(e){var n=e.target.value,r=t.props,a=r.query,o=r.onChange,s=a.azureCostAnalysis;s.grouping=s.grouping||{type:"Dimension",name:"ServiceName"},s.grouping[0].name=n,o(i(i({},a),{azureCostAnalysis:s}))},t.onACAGroupingNameChangeDimension=function(e){var n=e.value,r=t.props,a=r.query,o=r.onChange,s=a.azureCostAnalysis;s.grouping=s.grouping||{type:"Dimension",name:"ServiceName"},s.grouping[0].name=n,o(i(i({},a),{azureCostAnalysis:s}))},t}return o(t,e),t.prototype.render=function(){var e,t=this.props.query;return e="TagKey"===t.azureCostAnalysis.grouping[0].type?b.a.createElement("div",null,b.a.createElement(A.FormField,{label:"Tag Name",labelWidth:8,inputWidth:16,onChange:this.onACAGroupingNameChange,value:t.azureCostAnalysis.grouping[0].name,placeholder:"Tag Name",tooltip:"Tag Name"})):"Dimension"===t.azureCostAnalysis.grouping[0].type?b.a.createElement("span",null,b.a.createElement(A.Select,{className:"width-24",value:k.find((function(e){return e.value===t.azureCostAnalysis.grouping[0].name})),options:k,defaultValue:t.azureCostAnalysis.grouping[0].name,onChange:this.onACAGroupingNameChangeDimension})):b.a.createElement("div",null),b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.FormLabel,{className:"width-12",tooltip:"Group by"},"Group by"),b.a.createElement(A.Select,{className:"width-12",value:P.find((function(e){return e.value===t.azureCostAnalysis.grouping[0].type})),options:P,defaultValue:t.azureCostAnalysis.grouping[0].type,onChange:this.onACAGroupingTypeChange}),b.a.createElement("span",null,e))))},t}(C.PureComponent),M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onACAFilteAdd=function(){var e=t.props,n=e.query,r=e.onChange,a=n.azureCostAnalysis;a.filters=a.filters||[{FilterType:"None",Name:"None",Operator:"In",Values:[]}],a.filters.push({FilterType:"None",Name:"None",Operator:"In",Values:[]}),r(i(i({},n),{azureCostAnalysis:a}))},t.onACAFilterRemove=function(e){var n=t.props,r=n.query,a=n.onChange,o=r.azureCostAnalysis;o.filters=o.filters||[{FilterType:"None",Name:"None",Operator:"In",Values:[]}],o.filters.splice(e,1),a(i(i({},r),{azureCostAnalysis:o}))},t.onACAFilterTypeChange=function(e,n){var r=e.value,a=t.props,o=a.query,s=a.onChange,u=o.azureCostAnalysis;u.filters=u.filters||[{FilterType:"None",Name:"None",Operator:"In",Values:[]}],u.filters[n].FilterType=r,s(i(i({},o),{azureCostAnalysis:u}))},t.onACAFilterNameChange=function(e,n){var r=e.target.value,a=t.props,o=a.query,s=a.onChange,u=o.azureCostAnalysis;u.filters=u.filters||[{FilterType:"None",Name:"None",Operator:"In",Values:[]}],u.filters[n].Name=r,s(i(i({},o),{azureCostAnalysis:u}))},t.onACAFilterNameChangeDimension=function(e,n){var r=e.value,a=t.props,o=a.query,s=a.onChange,u=o.azureCostAnalysis;u.filters=u.filters||[{FilterType:"None",Name:"None",Operator:"In",Values:[]}],u.filters[n].Name=r,s(i(i({},o),{azureCostAnalysis:u}))},t.onACAFilterOperatorChange=function(e,n){var r=e.target.value,a=t.props,o=a.query,s=a.onChange,u=o.azureCostAnalysis;u.filters=u.filters||[{FilterType:"None",Name:"None",Operator:"In",Values:[]}],u.filters[n].Operator=r,s(i(i({},o),{azureCostAnalysis:u}))},t.onACAFilterValueChange=function(e,n){var r=e.target.value,a=t.props,o=a.query,s=a.onChange,u=o.azureCostAnalysis;u.filters=u.filters||[{FilterType:"None",Name:"None",Operator:"In",Values:[]}],u.filters[n].Values=r.split(","),s(i(i({},o),{azureCostAnalysis:u}))},t}return o(t,e),t.prototype.render=function(){var e=this,t=this.props.query;return b.a.createElement("div",null,0===t.azureCostAnalysis.filters.length?b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.FormLabel,{className:"width-12",tooltip:"Filter"},"Filter"))),b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement("span",{className:"btn btn-success btn-small",style:{margin:"5px"},onClick:this.onACAFilteAdd},"Add Filter")))):null,t.azureCostAnalysis.filters.map((function(t,n){return b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.FormLabel,{className:"width-12",tooltip:"Filter"},"Filter ",n+1))),b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.Select,{className:"width-12",value:Q.find((function(e){return e.value===t.FilterType})),options:Q,defaultValue:t.FilterType,onChange:function(t){return e.onACAFilterTypeChange(t,n)}}))),b.a.createElement("div",null,"None"===t.FilterType?b.a.createElement("span",null,b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement("span",{className:"btn btn-success btn-small",style:{margin:"5px"},onClick:e.onACAFilteAdd},"+"),b.a.createElement("span",{className:"btn btn-danger btn-small",style:{margin:"5px"},onClick:function(){return e.onACAFilterRemove(n)}},"x")))):null,"Dimensions"===t.FilterType?b.a.createElement("span",null,b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.Select,{className:"width-12",value:k.find((function(e){return e.value===t.Name})),options:k,defaultValue:t.Name,onChange:function(t){return e.onACAFilterNameChangeDimension(t,n)}})),b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.Input,{type:"text",className:"width-12",title:"Operator",placeholder:"Operator",value:t.Operator,onChange:function(t){return e.onACAFilterOperatorChange(t,n)},disabled:!0})),b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.Input,{type:"text",className:"width-12",title:"Values; Comma seperated",placeholder:"Values",value:t.Values.join(","),onChange:function(t){return e.onACAFilterValueChange(t,n)}})),b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement("span",{className:"btn btn-success btn-small",style:{margin:"5px"},onClick:e.onACAFilteAdd},"+"),b.a.createElement("span",{className:"btn btn-danger btn-small",style:{margin:"5px"},onClick:function(){return e.onACAFilterRemove(n)}},"x")))):null,"Tags"===t.FilterType?b.a.createElement("span",null,b.a.createElement("div",{className:"gf-form"},b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.Input,{type:"text",className:"width-12",title:"Tag Name",placeholder:"Tag Name",value:t.Name,onChange:function(t){return e.onACAFilterNameChange(t,n)}})),b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.Input,{type:"text",className:"width-12",title:"Operator",placeholder:"Operator",value:t.Operator,onChange:function(t){return e.onACAFilterOperatorChange(t,n)},disabled:!0})),b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement(A.Input,{type:"text",className:"width-12",title:"Tags; Comma seperated",placeholder:"Tags",value:t.Values.join(","),onChange:function(t){return e.onACAFilterValueChange(t,n)}})),b.a.createElement("div",{className:"gf-form gf-form--grow"},b.a.createElement("span",{className:"btn btn-success btn-small",style:{margin:"5px"},onClick:e.onACAFilteAdd},"+"),b.a.createElement("span",{className:"btn btn-danger btn-small",style:{margin:"5px"},onClick:function(){return e.onACAFilterRemove(n)}},"x")))):null))})))},t}(C.PureComponent),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.query,n=e.onChange,r=e.datasource;return b.a.createElement("div",null,b.a.createElement(L,{query:t,onChange:n,datasource:r}),b.a.createElement(V,{query:t,onChange:n}),b.a.createElement(W,{query:t,onChange:n}),b.a.createElement(M,{query:t,onChange:n}))},t}(C.PureComponent),U={subscriptionId:"",granularity:"Daily",grouping:[{type:"None",name:"None"}],filters:[{FilterType:"None",Name:"None",Operator:"In",Values:[]}]},$=function(e,t){this.type="ActualCost",this.timeframe="Custom",this.timePeriod={from:new Date(e.from).toISOString(),to:new Date(e.to).toISOString()},this.dataSet=t},J=function(e){function t(t,n,r,a){void 0===t&&(t="");var o=e.call(this,t,n)||this;o.scope=a.replace("/subscriptions/"+r.subscriptionId,n.scopedVars),o.granularity=a.replace(r.granularity||"Monthly",n.scopedVars);var i;if(i=r.grouping&&r.grouping.length>0?r.grouping:[{type:"Dimension",name:"ServiceName"}],o.data=new $(n.range,{granularity:o.granularity,aggregation:{totalCost:{name:"PreTaxCost",function:"Sum"},totalCostUSD:{name:"PreTaxCostUSD",function:"Sum"}},sorting:[{direction:"ascending",name:"UsageDate"}],grouping:i}),i&&i.length>0&&"None"===i[0].type&&delete o.data.dataSet.grouping,r.filters=r.filters.filter((function(e){return e&&"None"!==e.FilterType})),r.filters&&r.filters.length>0&&"None"!==r.filters[0].FilterType){if(1===r.filters.length){var s={};s[r.filters[0].FilterType]=r.filters[0],delete s[r.filters[0].FilterType].FilterType,o.data.dataSet.filter=s}else if(r.filters.length>0){var u={And:[]};r.filters.forEach((function(e){var t={};t[e.FilterType]=e,delete t[e.FilterType].FilterType,u.And.push(t)})),o.data.dataSet.filter=u}}else r.filter&&(o.data.dataSet.filter=r.filter);return o}return o(t,e),t}(h),K=function(){function e(e,t){this.azureConnection=e,this.templateSrv=t,this.url=this.azureConnection.instanceSettings.url,this.baseUrl="/"+this.azureConnection.instanceSettings.jsonData.cloudName}return e.$inject=["azureConnection","templateSrv"],e.prototype.doCostRequest=function(e,t){return void 0===t&&(t=1),s(this,void 0,void 0,(function(){var n;return u(this,(function(r){return n={data:e.data,headers:{"Content-Type":"application/json"},method:"POST",url:this.url+this.baseUrl+e.scope+"/providers/Microsoft.CostManagement/query?api-version=2019-11-01&$top=10000"},[2,m(n,t)]}))}))},e.prototype.doQueries=function(e){var t=this;return e.map((function(e){return t.doCostRequest(e).then((function(t){return{result:t,query:e}})).catch((function(t){throw{error:t,query:e}}))}))},e.prototype.query=function(e){return s(this,void 0,void 0,(function(){var t,n,r=this;return u(this,(function(a){return(t=e.targets.filter((function(e){var t=e.azureCostAnalysis;return!0!==e.hide&&t})).map((function(t){var n=t.azureCostAnalysis;return new J(t.refId,e,n,r.templateSrv)})))&&0!==t.length?(n=this.doQueries(t),[2,Promise.all(n).then((function(e){return new G(e).output}))]):[2]}))}))},e.prototype.metricFindQuery=function(e){},e}(),B=[{value:"Azure Resource Graph",label:"Azure Resource Graph"},{value:"Azure Cost Analysis",label:"Azure Cost Analysis"},{value:"Azure Application Insights",label:"Azure Application Insights - unstable"},{value:"Azure Log Analytics",label:"Azure Log Analytics - unstable"}],H=[{value:"azuremonitor",label:"Azure"},{value:"govazuremonitor",label:"Azure US Government"},{value:"germanyazuremonitor",label:"Azure Germany"},{value:"chinaazuremonitor",label:"Azure China"}],Y=function(e){function t(t,n){var r=e.call(this,t)||this;r.instanceSettings=t,r.templateSrv=n;var a=new f(r.instanceSettings);return r.azureResourceGraphDatasource=new S(a,r.templateSrv),r.azureApplicationInsightsDatasource=new F(a,r.templateSrv),r.azureLogAnalyticsDatasource=new j(a,r.templateSrv),r.azureConstAnalysisDatasource=new K(a,r.templateSrv),r}return t.$inject=["instanceSettings","templateSrv"],o(t,e),t.prototype.query=function(e){var t=[],n=Object(l.cloneDeep)(e);(n.targets=Object(l.filter)(n.targets,["queryType","Azure Resource Graph"]),n.targets.length>0)&&((a=this.azureResourceGraphDatasource.query(n))&&t.push(a));var r=Object(l.cloneDeep)(e);(r.targets=Object(l.filter)(r.targets,["queryType","Azure Application Insights"]),r.targets.length>0)&&((a=this.azureApplicationInsightsDatasource.query(r))&&t.push(a));var a,o=Object(l.cloneDeep)(e);(o.targets=Object(l.filter)(o.targets,["queryType","Azure Log Analytics"]),o.targets.length>0)&&((a=this.azureLogAnalyticsDatasource.query(o))&&t.push(a));var i=Object(l.cloneDeep)(e);if(i.targets=Object(l.filter)(i.targets,["queryType","Azure Cost Analysis"]),i.targets.length>0){var s=this.azureConstAnalysisDatasource.query(i);s&&t.push(s)}return Promise.all(t).then((function(e){return{data:Object(l.flatten)(e)}}))},t.prototype.testDatasource=function(){var e=this;return new Promise((function(t,n){return s(e,void 0,void 0,(function(){var e;return u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,new f(this.instanceSettings).getSubscriptions()];case 1:return(e=r.sent())&&e.length>0?t({message:"Successfully Connected Azure Monitor",status:"success"}):n({message:"Failed to retrieve subscriptions",status:"error"}),[3,3];case 2:return r.sent(),n({message:"Failed to Connect",status:"error"}),[3,3];case 3:return[2]}}))}))}))},t.prototype.metricFindQuery=function(e){if(!e)return Promise.resolve([]);var t=this.azureResourceGraphDatasource.metricFindQuery(e);return t||Promise.resolve([])},t}(r.DataSourceApi),Z=H,ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onCloudNameChange=function(e){var n=t.props,r=n.onOptionsChange,a=n.options,o=i(i({},a.jsonData),{cloudName:e.value});r(i(i({},a),{jsonData:o}))},t.onTenantIdChange=function(e){var n=t.props,r=n.onOptionsChange,a=n.options,o=i(i({},a.jsonData),{tenantId:e.target.value});r(i(i({},a),{jsonData:o}))},t.onClientIdChange=function(e){var n=t.props,r=n.onOptionsChange,a=n.options,o=i(i({},a.jsonData),{clientId:e.target.value});r(i(i({},a),{jsonData:o}))},t.onClientSecretChange=function(e){var n=t.props,r=n.onOptionsChange,a=n.options;r(i(i({},a),{secureJsonData:{clientSecret:e.target.value}}))},t.onResetclientSecret=function(){var e=t.props,n=e.onOptionsChange,r=e.options;n(i(i({},r),{secureJsonFields:i(i({},r.secureJsonFields),{clientSecret:!1}),secureJsonData:i(i({},r.secureJsonData),{clientSecret:""})}))},t}return o(t,e),t.prototype.render=function(){var e=this.props.options,t=e.secureJsonData||{};e.jsonData.cloudName=e.jsonData.cloudName||"azuremonitor";var n=e.jsonData,r=e.secureJsonFields;return b.a.createElement("div",{className:"gf-form-group"},b.a.createElement("div",{className:"gf-form"},b.a.createElement(A.FormLabel,{className:"width-10",tooltip:"Choose an Azure Cloud Type"},"Cloud Type"),b.a.createElement(A.Select,{className:"width-24",value:Z.find((function(e){return e.value===n.cloudName})),options:Z,defaultValue:n.cloudName,onChange:this.onCloudNameChange})),b.a.createElement("div",{className:"gf-form"},b.a.createElement(A.FormField,{label:"Tenant ID",labelWidth:10,inputWidth:24,onChange:this.onTenantIdChange,value:n.tenantId||"",placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",tooltip:"Tenant ID"})),b.a.createElement("div",{className:"gf-form"},b.a.createElement(A.FormField,{label:"Client ID",labelWidth:10,inputWidth:24,onChange:this.onClientIdChange,value:n.clientId||"",placeholder:"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX",tooltip:"Client ID"})),b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement(A.SecretFormField,{isConfigured:r&&r.clientSecret,value:t.clientSecret||"",label:"API Key",placeholder:"Client Secret",labelWidth:10,inputWidth:24,onReset:this.onResetclientSecret,onChange:this.onClientSecretChange}))))},t}(C.PureComponent),te=B,ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.onServiceTypeChange=function(e){var n=t.props,r=n.query;(0,n.onChange)(i(i({},r),{queryType:e.value}))},t}return o(t,e),t.prototype.render=function(){var e,t=Object(l.defaults)(this.props.query,{azureResourceGraph:Object(l.defaults)(this.props.query.azureResourceGraph,w),azureAppInsights:Object(l.defaults)(this.props.query.azureAppInsights,I),azureLogAnalytics:Object(l.defaults)(this.props.query.azureAppInsights,D),azureCostAnalysis:Object(l.defaults)(this.props.query.azureCostAnalysis,U)});switch(t.queryType){case"Azure Resource Graph":e=b.a.createElement(N,{onChange:this.props.onChange,query:t,datasource:this.props.datasource});break;case"Azure Application Insights":e=b.a.createElement(X,{onChange:this.props.onChange,query:t,datasource:this.props.datasource});break;case"Azure Log Analytics":e=b.a.createElement(T,{onChange:this.props.onChange,query:t,datasource:this.props.datasource});break;case"Azure Cost Analysis":e=b.a.createElement(_,{onChange:this.props.onChange,query:t,datasource:this.props.datasource})}return b.a.createElement("div",null,b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},b.a.createElement(A.FormLabel,{className:"width-12",tooltip:"Service Type"},"Service"),b.a.createElement(A.Select,{className:"width-24",value:te.find((function(e){return e.value===t.queryType})),options:te,defaultValue:t.queryType,onChange:this.onServiceTypeChange}))),b.a.createElement("div",{className:"gf-form-inline"},b.a.createElement("div",{className:"gf-form"},e)))},t}(C.PureComponent);n.d(t,"plugin",(function(){return re}));var re=new r.DataSourcePlugin(Y).setConfigEditor(ee).setQueryEditor(ne)}])}));